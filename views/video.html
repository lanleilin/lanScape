{% extends "base.html" %} {% block main %}
<script>
    // $(function() {
    //     document.getElementById('startVideo').addEventListener('click', function() {
    //         var videoElem = document.getElementById("video");
    //         navigator.mediaDevices.getUserMedia({
    //             video: true
    //         }).then(
    //             function(stream) {
    //                 videoElem.src = URL.createObjectURL(stream);
    //                 videoElem.play();
    //             }

    //             // function(stream) {
    //             //     var mediaRecorder = new MediaRecorder(stream);
    //             //     mediaRecorder.addEventListener(
    //             //         "dataavailable",
    //             //         function(event) {
    //             //             console.log(event);
    //             //         }
    //             //     );
    //             //     mediaRecorder.start();
    //             // }
    //         );
    //     })
    // })
</script>
<style>
    #videoContainer {
        width: 100%;
        display: flex;
        justify-content: center;
        align-items: center;
        margin: 10px 0;
    }
    
    #videoContainer video {
        width: 100%;
        max-width: 400px;
    }
    /* @media screen and(max-width:540px) {
        #videoContainer video {
            width: 200px;
        }
    }
    
    @media screen and(min-width:540px) {
        #videoContainer video {
            width: 200px;
        }
    } */
    
    #box {
        width: 100%;
        height: 100%;
        overflow: hidden;
    }
</style>
<div id="box">
    <h2 id="startVideo">start video</h2>
    <audio id="joiBootMusic" src="/static/videos/joi.mp3"></audio>
    <button id="getVideoBtn" class="btn btn-primary">获取视频</button>
    <button id="joiBootMusicBtn" class="btn btn-primary">开机音乐</button>
    <!-- Button trigger modal -->
    <button id="getImgBtn" type="button" class="btn btn-primary" data-toggle="modal" data-target="#getImgModal">
        获取图片
      </button>

    <!-- Modal -->
    <div class="modal fade" id="getImgModal" tabindex="-1" role="dialog" aria-labelledby="getImgModalLabel">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title" id="getImgModalLabel">I want</h4>
                </div>
                <div class="modal-body">
                    <div class="input-group input-group-lg">
                        <span class="input-group-addon" id="sizing-addon1">@</span>
                        <input id="getImgInput" type="text" class="form-control" placeholder="Username" aria-describedby="sizing-addon1">
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                    <button id="getImgConfirm" type="button" class="btn btn-primary">确定</button>
                </div>
            </div>
        </div>
    </div>

    <div id="videoContainer">
        <!-- <img src="/static/images/joi/joi.jpg" alt=""> -->
        <!-- <video id="video" controls="controls"></video> -->
        <!-- <video id="video" src="/static/videos/testVideo.mp4" controls="controls"></video> -->
    </div>
</div>
<script>
    $(function() {
        var flagAudio = false;
        var flagImg = false;

        $('#getVideoBtn').click(function() {
                $('#videoContainer').empty()
                $('#videoContainer').append('<video id="video" src="/static/videos/testVideo.mp4" controls="controls"></video>')
            })
            // 加载不同图片
        $('#getImgConfirm').click(function() {
                var ipt = $('#getImgInput').val();
                if (ipt == 'joi') {
                    $('#videoContainer').empty()
                    $('#videoContainer').append('<img src="/static/images/joi/joi.jpg" alt="">')
                    $('#getImgModal').modal('toggle')

                } else {
                    $('#videoContainer').empty()
                    flagImg = !flagImg;
                    if (flagImg) {
                        $('#videoContainer').append('<img src="/static/images/joi/joi1.jpg" alt="">')
                    } else {
                        $('#videoContainer').append('<img src="/static/images/joi/joiInRain.jpg" alt="">')
                    }
                    $('#getImgModal').modal('toggle')

                }
            })
            // 播放开机音乐
        $('#joiBootMusicBtn').click(function() {
            flagAudio = !flagAudio;
            if (flagAudio) {
                document.getElementById('joiBootMusic').play();
            } else {
                document.getElementById('joiBootMusic').pause();

            }
        })

    })
</script>
{% endblock %}